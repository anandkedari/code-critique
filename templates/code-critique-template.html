<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Critique Report - {{ metadata.service_name }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.5;
            color: #333333;
            background: #f5f5f5;
            font-size: 14px;
        }
        
        .header {
            background: #333333;
            color: #ffffff;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 3px solid #00c853;
        }

        .header h1 { 
            font-size: 1.8rem; 
            margin-bottom: 0.3rem; 
            font-weight: 600;
        }
        
        .header .metadata {
            display: flex;
            gap: 1.5rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
            opacity: 0.85;
            flex-wrap: wrap;
        }
        
        /* Tab Navigation */
        .tab-container {
            background: #ffffff;
            border-bottom: 2px solid #e0e0e0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .tabs {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 0;
        }
        
        .tab {
            flex: 1;
            padding: 1rem 1.5rem;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #718096;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .tab:hover {
            background: #e9ecef;
            color: #2d3748;
        }
        
        .tab.active {
            background: #ffffff;
            color: #00c853;
            border-bottom-color: #00c853;
        }
        
        .tab-icon {
            font-size: 1.2rem;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        
        /* Scenario Cards */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .scenario-card {
            background: #ffffff;
            border-radius: 8px;
            padding: 1.25rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #ddd;
            transition: transform 0.2s;
        }

        .scenario-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .scenario-card.pass {
            border-left-color: #00c853;
            background: #f0fdf9;
        }

        .scenario-card.fail {
            border-left-color: #f44336;
            background: #fff5f5;
        }

        .scenario-card.partial {
            border-left-color: #ff9800;
            background: #fffbf0;
        }

        .scenario-card.unknown {
            border-left-color: #9e9e9e;
            background: #f5f5f5;
        }

        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .scenario-title {
            font-size: 1rem;
            font-weight: 600;
            color: #2d3748;
            flex: 1;
            line-height: 1.4;
        }

        .scenario-status {
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-left: 0.5rem;
        }

        .scenario-description {
            font-size: 0.85rem;
            color: #4a5568;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .scenario-evidence {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 0.75rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
        }

        .evidence-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
            font-size: 0.8rem;
        }

        .evidence-item {
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            position: relative;
        }

        .evidence-item:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #718096;
        }

        .evidence-file {
            font-family: 'Monaco', 'Menlo', monospace;
            color: #2563eb;
            font-size: 0.75rem;
            display: block;
            margin-top: 0.25rem;
        }

        .evidence-code {
            background: #2d3748;
            color: #f8f8f2;
            padding: 0.5rem;
            border-radius: 4px;
            margin-top: 0.5rem;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.7rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        /* Scenario Table Styles */
        .scenario-table {
            margin-top: 1.5rem;
        }
        
        .scenario-row {
            background: #ffffff;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #ddd;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .scenario-row.pass {
            border-left-color: #00c853;
        }
        
        .scenario-row.fail {
            border-left-color: #f44336;
        }
        
        .scenario-row.partial {
            border-left-color: #ff9800;
        }
        
        .scenario-row.unknown {
            border-left-color: #9e9e9e;
        }
        
        .scenario-header-row {
            display: flex;
            align-items: center;
            padding: 1.25rem;
            cursor: pointer;
            transition: background 0.2s;
            gap: 1rem;
        }
        
        .scenario-header-row:hover {
            background: #f8f9fa;
        }
        
        .scenario-status-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .scenario-title-cell {
            flex: 1;
            font-size: 1rem;
            font-weight: 600;
            color: #2d3748;
            line-height: 1.4;
        }
        
        .scenario-expand-icon {
            font-size: 0.8rem;
            color: #718096;
            flex-shrink: 0;
            transition: transform 0.3s;
        }
        
        .scenario-row.expanded .scenario-expand-icon {
            transform: rotate(180deg);
        }
        
        .scenario-details {
            display: none;
            padding: 0 1.25rem 1.25rem 1.25rem;
            border-top: 1px solid #e0e0e0;
        }
        
        .scenario-row.expanded .scenario-details {
            display: block;
        }
        
        .scenario-description {
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #4a5568;
        }
        
        .evidence-line {
            color: #718096;
            font-size: 0.7rem;
            margin-left: 0.5rem;
        }
        
        .scenario-summary {
            background: #ffffff;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            border-left: 3px solid #ddd;
            text-align: center;
        }
        
        .stat-card.pass { border-left-color: #00c853; background: #f0fdf9; }
        .stat-card.fail { border-left-color: #f44336; background: #fff5f5; }
        .stat-card.partial { border-left-color: #ff9800; background: #fffbf0; }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Category sections */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .card {
            background: #ffffff;
            border-radius: 3px;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            border: 1px solid #e0e0e0;
            transition: transform 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card:hover { transform: translateY(-2px); box-shadow: 0 3px 10px rgba(0,0,0,0.12); }
        
        .card-title {
            font-size: 0.75rem;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 700;
        }
        
        .badge-critical { background: #f44336; color: #ffffff; }
        .badge-warning { background: #ff9800; color: #ffffff; }
        .badge-info { background: #2196f3; color: #ffffff; }
        .badge-success { background: #00c853; color: #ffffff; }
        
        .category-section {
            background: #ffffff;
            border-radius: 3px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            border: 1px solid #e0e0e0;
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .category-title {
            font-size: 1.1rem;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-weight: 600;
        }
        
        .category-status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.75rem;
        }
        
        .category-status-excellent { background: #d1fae5; color: #059669; }
        .category-status-good { background: #dbeafe; color: #2563eb; }
        .category-status-needs-work { background: #fef3c7; color: #d97706; }
        .category-status-critical { background: #ffd4d4; color: #c53030; }
        
        .issue {
            background: #f8f9fa;
            border-left: 3px solid #ddd;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 6px;
            font-size: 0.85rem;
        }
        
        .issue-critical { border-left-color: #c53030; }
        .issue-warning { border-left-color: #d97706; }
        .issue-info { border-left-color: #2563eb; }
        
        .issue-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }
        
        .issue-title {
            font-weight: 600;
            font-size: 0.9rem;
            color: #2d3748;
        }
        
        .issue-description {
            color: #4a5568;
            margin-bottom: 0.75rem;
            line-height: 1.6;
            white-space: pre-wrap;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
        }
        
        .file-path {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.75rem;
            color: #718096;
            background: #fff;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 0.5rem;
        }
        
        .code-block {
            background: #2d3748;
            color: #f8f8f2;
            padding: 0.75rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 0.5rem 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
            line-height: 1.5;
            white-space: pre-wrap;
        }
        
        .recommendation {
            background: #e8f4f8;
            border-left: 3px solid #2563eb;
            padding: 0.75rem;
            margin-top: 0.75rem;
            border-radius: 4px;
        }
        
        .recommendation-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.35rem;
            font-size: 0.85rem;
        }
        
        .no-issues {
            background: #d1fae5;
            color: #065f46;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
            font-weight: 500;
            margin: 0.75rem 0;
            font-size: 0.85rem;
        }
        
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: #718096;
            border-top: 1px solid #e2e8f0;
            margin-top: 1.5rem;
            font-size: 0.8rem;
        }
        
        @media print {
            body { background: white; }
            .tab-container { position: static; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>üîç Code Critique Report</h1>
        <div class="metadata">
            <div><strong>Service:</strong> {{ metadata.service_name }}</div>
            <div><strong>Generated:</strong> {{ metadata.generated_at }}</div>
            <div><strong>Framework:</strong> {{ metadata.framework }}</div>
            <div><strong>Language:</strong> {{ metadata.language }}</div>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tab-container">
        <div class="tabs">
            <button class="tab active" onclick="switchTab(0)">
                <span class="tab-icon">üß™</span>
                Functional Compliance
            </button>
            <button class="tab" onclick="switchTab(1)">
                <span class="tab-icon">üìä</span>
                Code Analysis (8 Categories)
            </button>
        </div>
    </div>

    <!-- Tab 1: Test Scenario Compliance -->
    <div class="tab-content active">
        <div class="container">
            {% set test_scenario_category = categories|selectattr('name', 'equalto', 'Functional Compliance')|first if categories else none %}
            
            {% if test_scenario_category %}
            <!-- Summary -->
            <div class="scenario-summary">
                <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #2d3748;">üß™ Test Scenario Validation Results</h2>
                <p style="color: #718096; margin-bottom: 1rem;">
                    This report validates your code against business requirements defined in <code>test-scenarios.yml</code>.
                    Each scenario is checked against actual code with evidence (file paths, line numbers, and code snippets).
                </p>
                
                <div class="summary-stats">
                    {% set pass_count = test_scenario_category['items']|selectattr('assessment', 'equalto', 'compliant')|list|length if test_scenario_category.get('items') else 0 %}
                    {% set fail_count = test_scenario_category['items']|selectattr('assessment', 'equalto', 'critical')|list|length if test_scenario_category.get('items') else 0 %}
                    {% set partial_count = test_scenario_category['items']|selectattr('assessment', 'equalto', 'warning')|list|length if test_scenario_category.get('items') else 0 %}
                    {% set unknown_count = test_scenario_category['items']|selectattr('assessment', 'equalto', 'info')|list|length if test_scenario_category.get('items') else 0 %}
                    {% set total_count = (test_scenario_category['items']|length if test_scenario_category.get('items') else 0) %}

                    <div class="stat-card pass">
                        <div class="stat-value" style="color: #00c853;">{{ pass_count }}</div>
                        <div class="stat-label">‚úÖ Passed</div>
                    </div>
                    <div class="stat-card fail">
                        <div class="stat-value" style="color: #f44336;">{{ fail_count }}</div>
                        <div class="stat-label">‚ùå Failed</div>
                    </div>
                    <div class="stat-card partial">
                        <div class="stat-value" style="color: #ff9800;">{{ partial_count }}</div>
                        <div class="stat-label">‚ö†Ô∏è Partial</div>
                    </div>
                    <div class="stat-card" style="border-left-color: #9e9e9e; background: #f5f5f5;">
                        <div class="stat-value" style="color: #757575;">{{ unknown_count }}</div>
                        <div class="stat-label">‚ùì Could Not Verify</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: #2563eb;">{{ total_count }}</div>
                        <div class="stat-label">Total Scenarios</div>
                    </div>
                </div>
            </div>
            
            <!-- Scenario Table -->
            {% if test_scenario_category.get('items') %}
            <div class="scenario-table">
                {% for item in test_scenario_category['items'] %}
                <div class="scenario-row {% if item.assessment == 'compliant' %}pass{% elif item.assessment == 'critical' %}fail{% elif item.assessment == 'warning' %}partial{% else %}unknown{% endif %}" id="scenario-{{ loop.index }}">
                    <div class="scenario-header-row" onclick="toggleScenario({{ loop.index }})">
                        <div class="scenario-status-icon">
                            {% if item.assessment == 'compliant' %}‚úÖ
                            {% elif item.assessment == 'critical' %}‚ùå
                            {% elif item.assessment == 'warning' %}‚ö†Ô∏è
                            {% else %}‚ùì{% endif %}
                        </div>
                        <div class="scenario-title-cell">{{ item.title }}</div>
                        <div class="scenario-expand-icon">‚ñº</div>
                    </div>
                    
                    <div class="scenario-details">
                        {% if item.description %}
                        <div class="scenario-description">
                            <strong>üìã Result:</strong> {{ item.description }}
                        </div>
                        {% endif %}
                        
                        <!-- Find matching issues for this scenario -->
                        {% set scenario_issues = [] %}
                        {% for issue in test_scenario_category.get('issues', []) %}
                            {% if item.title in issue.title or issue.title in item.title %}
                                {% set _ = scenario_issues.append(issue) %}
                            {% endif %}
                        {% endfor %}
                        
                        {% if scenario_issues %}
                        <div class="scenario-evidence">
                            <div class="evidence-title">üìÇ Code Evidence:</div>
                            {% for issue in scenario_issues %}
                            <div class="evidence-item">
                                {% if issue.file_path %}
                                <div class="evidence-file">
                                    üìÑ {{ issue.file_path }}
                                    {% if issue.line_number %}
                                    <span class="evidence-line">Line {{ issue.line_number }}</span>
                                    {% endif %}
                                </div>
                                {% endif %}
                                
                                {% if issue.description %}
                                <div style="color: #4a5568; font-size: 0.85rem; margin-top: 0.5rem; white-space: pre-wrap; font-family: 'Monaco', 'Menlo', monospace; line-height: 1.6; background: #ffffff; padding: 0.75rem; border-radius: 6px;">
                                    {{ issue.description }}
                                </div>
                                {% endif %}
                                
                                {% if issue.code_snippet %}
                                <div class="evidence-code">{{ issue.code_snippet }}</div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="scenario-evidence">
                            <div class="evidence-title">‚úÖ Validation:</div>
                            <div style="color: #4a5568; font-size: 0.85rem; padding: 0.75rem; background: #ffffff; border-radius: 6px;">
                                Code implementation verified and compliant with requirements.
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-issues">
                ‚ÑπÔ∏è No test scenarios found. Add scenarios in <code>test-scenarios.yml</code> to validate your code.
            </div>
            {% endif %}
            
            {% else %}
            <!-- No Test Scenario category found -->
            <div class="container">
                <div class="scenario-summary">
                    <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #2d3748;">üß™ Test Scenario Compliance</h2>
                    <div style="background: #e8f4f8; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2196f3;">
                        <p style="margin-bottom: 1rem;"><strong>‚ÑπÔ∏è No Test Scenarios Detected</strong></p>
                        <p style="color: #4a5568; margin-bottom: 1rem;">
                            To enable scenario-based testing, create a <code>test-scenarios.yml</code> file in your service directory.
                        </p>
                        <p style="color: #4a5568; font-size: 0.85rem;">
                            <strong>Example:</strong>
                        </p>
                        <pre style="background: #2d3748; color: #f8f8f2; padding: 1rem; border-radius: 4px; margin-top: 0.5rem; overflow-x: auto; font-size: 0.8rem;">service_name: "my-service"

global_validations:
  - "Data stored must match request"
  - "Timestamps set automatically"

scenarios:
  - "Customer creation with valid data"
  - "Age validation (minimum 18)"</pre>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Tab 2: Code Analysis Categories -->
    <div class="tab-content">
        <div class="container">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="card">
                    <div class="card-title">Overall Status</div>
                    <span class="badge {% if summary.critical_count == 0 and summary.warning_count == 0 %}badge-success{% elif summary.critical_count == 0 %}badge-info{% elif summary.critical_count <= 3 %}badge-warning{% else %}badge-critical{% endif %}">
                        {% if summary.critical_count == 0 and summary.warning_count == 0 %}EXCELLENT
                        {% elif summary.critical_count == 0 %}GOOD
                        {% elif summary.critical_count <= 3 %}NEEDS WORK
                        {% else %}CRITICAL{% endif %}
                    </span>
                </div>
                
                <div class="card">
                    <div class="card-title">Critical Issues</div>
                    <span class="badge badge-critical">{{ summary.critical_count }}</span>
                </div>
                
                <div class="card">
                    <div class="card-title">Warnings</div>
                    <span class="badge badge-warning">{{ summary.warning_count }}</span>
                </div>
                
                <div class="card">
                    <div class="card-title">Files Scanned</div>
                    <span class="badge badge-info">{{ summary.files_scanned }}</span>
                </div>
            </div>

            <!-- Category Analysis (Exclude Functional Compliance) -->
            {% for category in categories %}
            {% if category.name != 'Functional Compliance' %}
            {% set category_critical = category.issues|selectattr('severity', 'equalto', 'critical')|list|length if category.issues else 0 %}
            {% set category_warning = category.issues|selectattr('severity', 'equalto', 'warning')|list|length if category.issues else 0 %}
            {% if category_critical > 0 or category_warning > 0 %}
            <div class="category-section">
                <div class="category-header">
                    <div class="category-title">
                        <span>{{ category.icon }}</span>
                        {{ category.name }}
                    </div>
                    <span class="category-status-badge {% if category_critical == 0 and category_warning == 0 %}category-status-excellent{% elif category_critical == 0 %}category-status-good{% elif category_critical <= 2 %}category-status-needs-work{% else %}category-status-critical{% endif %}">
                        {% if category_critical == 0 and category_warning == 0 %}‚úÖ COMPLIANT
                        {% elif category_critical == 0 %}‚ö†Ô∏è {{ category_warning }} WARNING{{ 's' if category_warning != 1 else '' }}
                        {% else %}‚ùå {{ category_critical }} CRITICAL{% endif %}
                    </span>
                </div>

                {% if category.issues %}
                {% for issue in category.issues %}
                <div class="issue issue-{{ issue.severity }}">
                    <div class="issue-header">
                        <div class="issue-title">
                            {% if issue.severity == 'critical' %}‚ùå
                            {% elif issue.severity == 'warning' %}‚ö†Ô∏è
                            {% else %}‚ÑπÔ∏è{% endif %}
                            {{ issue.title }}
                        </div>
                        <span class="badge badge-{{ issue.severity }}">{{ issue.severity|upper }}</span>
                    </div>
                    
                    <div class="issue-description">{{ issue.description }}</div>
                    
                    {% if issue.file_path %}
                    <div class="file-path">üìÑ {{ issue.file_path }}{% if issue.line_number %} : Line {{ issue.line_number }}{% endif %}</div>
                    {% endif %}
                    
                    {% if issue.code_snippet %}
                    <div style="font-size: 0.75rem; color: #718096; margin-top: 0.5rem; font-weight: 600;">‚ùå Current Code:</div>
                    <div class="code-block">{{ issue.code_snippet }}</div>
                    {% endif %}
                    
                    {% if issue.recommendation or issue.fix_example %}
                    <div class="recommendation">
                        {% if issue.recommendation %}
                        <div class="recommendation-title">üí° Recommendation:</div>
                        <div>{{ issue.recommendation }}</div>
                        {% endif %}
                        
                        {% if issue.fix_example %}
                        <div style="font-size: 0.75rem; color: #1e40af; margin-top: 0.5rem; font-weight: 600;">‚úÖ Recommended Fix:</div>
                        <div class="code-block">{{ issue.fix_example }}</div>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
                {% else %}
                <div class="no-issues">‚úÖ No issues found in this category</div>
                {% endif %}
            </div>
            {% endif %}
            {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p><strong>Generated by Sentinel Code Critique Framework</strong></p>
        <p style="font-size: 0.9rem; margin-top: 0.5rem;">Based on industry best practices and security standards</p>
        <p style="font-size: 0.85rem; margin-top: 1rem; color: #999;">
            Report Date: {{ metadata.generated_at }} | Version: 2.0.0
        </p>
    </div>
    
    <script>
        function switchTab(index) {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                    tabContents[i].classList.add('active');
                } else {
                    tab.classList.remove('active');
                    tabContents[i].classList.remove('active');
                }
            });
        }
        
        function toggleScenario(index) {
            const row = document.getElementById('scenario-' + index);
            row.classList.toggle('expanded');
        }
    </script>
</body>
</html>
