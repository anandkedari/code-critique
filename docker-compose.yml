version: '3.8'

services:
  code-critique:
    image: localhost:5000/code-critique:latest
    container_name: code-critique
    command: python3 scripts/analyze-service.py
    working_dir: /app/code-critique
    environment:
      - AI_PROVIDER=${AI_PROVIDER}
      - AI_MODEL=${AI_MODEL}
      - AI_API_KEY=${AI_API_KEY}
      - AI_API_URL=${AI_API_URL}
      - AI_CONFIDENCE_THRESHOLD=${AI_CONFIDENCE_THRESHOLD}
      - SERVICE_PATH=/service
      - SERVICE_NAME=${SERVICE_NAME}
      - TEST_SCENARIOS_PATH=${TEST_SCENARIOS_PATH}
    volumes:
      - ./reports:/app/code-critique/reports
